{"remainingRequest":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/babel-loader/lib/index.js!/Users/karen.chen/Desktop/yuan-yang-view/node_modules/eslint-loader/index.js??ref--13-0!/Users/karen.chen/Desktop/yuan-yang-view/src/utils/axios.js","dependencies":[{"path":"/Users/karen.chen/Desktop/yuan-yang-view/src/utils/axios.js","mtime":1557475850341},{"path":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from \"axios\";\nimport store from \"../store\";\nimport errorHandler from \"./errorHandler\";\naxios.defaults.timeout = process.env.VUE_APP_API_TIMEOUT;\naxios.defaults.baseURL = process.env.VUE_APP_API_BASEURL; //Http Request\n\naxios.interceptors.request.use(function (config) {\n  var token = localStorage.getItem(\"token\");\n\n  if (token) {\n    config.headers.Authorization = \"Bearer \" + token;\n  }\n\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n}); //Http Response\n\naxios.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  switch (error.response.status) {\n    case 403:\n      store.dispatch(\"account/logout\");\n      break;\n  }\n\n  error.response.data.text = error.response.data.errorCode ? errorHandler[error.response.data.errorCode] : error.response.data.message;\n  return Promise.reject(error);\n});\nexport default axios;",{"version":3,"sources":["/Users/karen.chen/Desktop/yuan-yang-view/src/utils/axios.js"],"names":["axios","store","errorHandler","defaults","timeout","process","env","VUE_APP_API_TIMEOUT","baseURL","VUE_APP_API_BASEURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","response","status","dispatch","data","text","errorCode","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP;AACA,OAAOC,YAAP;AAEAF,KAAK,CAACG,QAAN,CAAeC,OAAf,GAAyBC,OAAO,CAACC,GAAR,CAAYC,mBAArC;AACAP,KAAK,CAACG,QAAN,CAAeK,OAAf,GAAyBH,OAAO,CAACC,GAAR,CAAYG,mBAArC,C,CAEA;;AACAT,KAAK,CAACU,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACI,UAAAC,MAAM,EAAI;AACN,MAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;;AACA,MAAIF,KAAJ,EAAW;AACPD,IAAAA,MAAM,CAACI,OAAP,CAAeC,aAAf,GAA+B,YAAYJ,KAA3C;AACH;;AACD,SAAOD,MAAP;AACH,CAPL,EAQI,UAAAM,KAAK,EAAI;AACL,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAVL,E,CAaA;;AACAnB,KAAK,CAACU,YAAN,CAAmBY,QAAnB,CAA4BV,GAA5B,CACI,UAAAU,QAAQ,EAAI;AACR,SAAOA,QAAP;AACH,CAHL,EAII,UAAAH,KAAK,EAAI;AACL,UAAQA,KAAK,CAACG,QAAN,CAAeC,MAAvB;AACI,SAAK,GAAL;AACItB,MAAAA,KAAK,CAACuB,QAAN,CAAe,gBAAf;AACA;AAHR;;AAMAL,EAAAA,KAAK,CAACG,QAAN,CAAeG,IAAf,CAAoBC,IAApB,GAA2BP,KAAK,CAACG,QAAN,CAAeG,IAAf,CAAoBE,SAApB,GACrBzB,YAAY,CAACiB,KAAK,CAACG,QAAN,CAAeG,IAAf,CAAoBE,SAArB,CADS,GAErBR,KAAK,CAACG,QAAN,CAAeG,IAAf,CAAoBG,OAF1B;AAGA,SAAOR,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAfL;AAkBA,eAAenB,KAAf","sourcesContent":["import axios from \"axios\";\nimport store from \"../store\";\nimport errorHandler from \"./errorHandler\";\n\naxios.defaults.timeout = process.env.VUE_APP_API_TIMEOUT;\naxios.defaults.baseURL = process.env.VUE_APP_API_BASEURL;\n\n//Http Request\naxios.interceptors.request.use(\n    config => {\n        var token = localStorage.getItem(\"token\");\n        if (token) {\n            config.headers.Authorization = \"Bearer \" + token;\n        }\n        return config;\n    },\n    error => {\n        return Promise.reject(error);\n    }\n);\n\n//Http Response\naxios.interceptors.response.use(\n    response => {\n        return response;\n    },\n    error => {\n        switch (error.response.status) {\n            case 403:\n                store.dispatch(\"account/logout\");\n                break;\n        }\n\n        error.response.data.text = error.response.data.errorCode\n            ? errorHandler[error.response.data.errorCode]\n            : error.response.data.message;\n        return Promise.reject(error);\n    }\n);\n\nexport default axios;\n"]}]}