{"remainingRequest":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/babel-loader/lib/index.js!/Users/karen.chen/Desktop/yuan-yang-view/node_modules/eslint-loader/index.js??ref--13-0!/Users/karen.chen/Desktop/yuan-yang-view/src/main.js","dependencies":[{"path":"/Users/karen.chen/Desktop/yuan-yang-view/src/main.js","mtime":1557475861355},{"path":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/core-js/modules/es6.array.iterator.js\";\nimport \"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/core-js/modules/es6.promise.js\";\nimport \"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/core-js/modules/es6.object.assign.js\";\nimport \"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/core-js/modules/es7.promise.finally.js\";\nimport Vue from \"vue\";\nimport \"./plugins/vuetify\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\nimport axios from \"./utils/axios\";\nimport errorHandler from \"./utils/errorHandler\";\nVue.config.productionTip = false;\nVue.prototype.$axios = axios;\nVue.prototype.$errorHandler = errorHandler;\nrouter.beforeEach(function (to, from, next) {\n  var token = localStorage.getItem(\"token\");\n\n  if (to.meta.requireAuth) {\n    if (token && varifyToken()) {\n      next();\n    } else {\n      next({\n        path: \"/login\"\n      });\n    }\n  } else {\n    next();\n  }\n});\n\nfunction varifyToken() {\n  return _varifyToken.apply(this, arguments);\n}\n\nfunction _varifyToken() {\n  _varifyToken = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee() {\n    var response;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return store.dispatch(\"account/getProfile\");\n\n          case 3:\n            response = _context.sent;\n            return _context.abrupt(\"return\", true);\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", false);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return _varifyToken.apply(this, arguments);\n}\n\nnew Vue({\n  router: router,\n  store: store,\n  render: function render(h) {\n    return h(App);\n  }\n}).$mount(\"#app\");",{"version":3,"sources":["/Users/karen.chen/Desktop/yuan-yang-view/src/main.js"],"names":["Vue","App","router","store","axios","errorHandler","config","productionTip","prototype","$axios","$errorHandler","beforeEach","to","from","next","token","localStorage","getItem","meta","requireAuth","varifyToken","path","dispatch","response","render","h","$mount"],"mappings":";;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA;AACA,OAAOC,GAAP;AACA,OAAOC,MAAP;AACA,OAAOC,KAAP;AACA,OAAOC,KAAP;AACA,OAAOC,YAAP;AAEAL,GAAG,CAACM,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AAEAP,GAAG,CAACQ,SAAJ,CAAcC,MAAd,GAAuBL,KAAvB;AACAJ,GAAG,CAACQ,SAAJ,CAAcE,aAAd,GAA8BL,YAA9B;AACAH,MAAM,CAACS,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAClC,MAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;;AACA,MAAIL,EAAE,CAACM,IAAH,CAAQC,WAAZ,EAAyB;AACrB,QAAIJ,KAAK,IAAIK,WAAW,EAAxB,EAA4B;AACxBN,MAAAA,IAAI;AACP,KAFD,MAEO;AACHA,MAAAA,IAAI,CAAC;AAAEO,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAJ;AACH;AACJ,GAND,MAMO;AACHP,IAAAA,IAAI;AACP;AACJ,CAXD;;SAaeM,W;;;;;;;0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAE6BjB,KAAK,CAACmB,QAAN,CAAe,oBAAf,CAF7B;;AAAA;AAEYC,YAAAA,QAFZ;AAAA,6CAGe,IAHf;;AAAA;AAAA;AAAA;AAAA,6CAKe,KALf;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AASA,IAAIvB,GAAJ,CAAQ;AACJE,EAAAA,MAAM,EAANA,MADI;AAEJC,EAAAA,KAAK,EAALA,KAFI;AAGJqB,EAAAA,MAAM,EAAE,gBAAAC,CAAC;AAAA,WAAIA,CAAC,CAACxB,GAAD,CAAL;AAAA;AAHL,CAAR,EAIGyB,MAJH,CAIU,MAJV","sourcesContent":["import Vue from \"vue\";\nimport \"./plugins/vuetify\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\nimport axios from \"./utils/axios\";\nimport errorHandler from \"./utils/errorHandler\";\n\nVue.config.productionTip = false;\n\nVue.prototype.$axios = axios;\nVue.prototype.$errorHandler = errorHandler;\nrouter.beforeEach((to, from, next) => {\n    var token = localStorage.getItem(\"token\");\n    if (to.meta.requireAuth) {\n        if (token && varifyToken()) {\n            next();\n        } else {\n            next({ path: \"/login\" });\n        }\n    } else {\n        next();\n    }\n});\n\nasync function varifyToken() {\n    try {\n        var response = await store.dispatch(\"account/getProfile\");\n        return true;\n    } catch (error) {\n        return false;\n    }\n}\n\nnew Vue({\n    router,\n    store,\n    render: h => h(App)\n}).$mount(\"#app\");\n"]}]}