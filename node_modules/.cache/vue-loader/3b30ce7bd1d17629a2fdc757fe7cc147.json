{"remainingRequest":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/karen.chen/Desktop/yuan-yang-view/src/components/iRoute/location.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/karen.chen/Desktop/yuan-yang-view/src/components/iRoute/location.vue","mtime":1557968724340},{"path":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/vuetify-loader/lib/loader.js","mtime":1549812933000},{"path":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karen.chen/Desktop/yuan-yang-view/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    props: [\"domain_id\"],\n    data() {\n        return {\n            selected: [],\n            location: [],\n            country: [],\n            continent: [],\n            network: [],\n            cdnProvider: [],\n            selectedCDN: [],\n            iRouteCDN: {},\n            filterData: [\n                {\n                    id: 1,\n                    continent_id: 1,\n                    country_id: 2,\n                    location: \"All\",\n                    isp: \"All\",\n                    network_id: 2,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"all\",\n                    country_name: \"not china\",\n                    network_name: \"国外\",\n                    cdn_id: 2,\n                    cdn_name: \"dnspod\"\n                },\n                {\n                    id: 2,\n                    continent_id: 4,\n                    country_id: 1,\n                    location: \"All\",\n                    isp: \"All\",\n                    network_id: 1,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"asia\",\n                    country_name: \"china\",\n                    network_name: \"国内\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                },\n                {\n                    id: 3,\n                    continent_id: 4,\n                    country_id: 1,\n                    location: \"All\",\n                    isp: \"Dian xin\",\n                    network_id: 3,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"asia\",\n                    country_name: \"china\",\n                    network_name: \"电信\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                },\n                {\n                    id: 4,\n                    continent_id: 4,\n                    country_id: 1,\n                    location: \"All\",\n                    isp: \"Lian tong\",\n                    network_id: 4,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"asia\",\n                    country_name: \"china\",\n                    network_name: \"联通\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                },\n                {\n                    id: 5,\n                    continent_id: 1,\n                    country_id: 2,\n                    location: \"All\",\n                    isp: \"All\",\n                    network_id: 15,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"all\",\n                    country_name: \"not china\",\n                    network_name: \"国外\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                },\n                {\n                    id: 6,\n                    continent_id: 4,\n                    country_id: 1,\n                    location: \"All\",\n                    isp: \"All\",\n                    network_id: 16,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"asia\",\n                    country_name: \"china\",\n                    network_name: \"国内\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                },\n                {\n                    id: 7,\n                    continent_id: 4,\n                    country_id: 1,\n                    location: \"Beijing\",\n                    isp: \"Yidong\",\n                    network_id: 101,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"asia\",\n                    country_name: \"china\",\n                    network_name: \"北京移动\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                },\n                {\n                    id: 8,\n                    continent_id: 4,\n                    country_id: 1,\n                    location: \"Beijing\",\n                    isp: \"Dian xin\",\n                    network_id: 33,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"asia\",\n                    country_name: \"china\",\n                    network_name: \"北京电信\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                }\n            ],\n            pagination: {\n                rowsPerPage: 20\n            },\n            rowsPerPageItems: [\n                { name: \"20 per page\", value: 20 },\n                { name: \"50 per pages\", value: 50 }\n            ],\n            perPage: 20,\n            pages: 0,\n            error: {\n                status: false,\n                message: \"\"\n            },\n            editedIndex: -1,\n            searchText: \"\",\n            headers: [\n                {\n                    text: \"#\",\n                    align: \"left\",\n                    sortable: false,\n                    width: \"80px\",\n                    value: \"id\"\n                },\n                {\n                    text: \"Location\",\n                    align: \"left\",\n                    sortable: true,\n                    value: \"Location\"\n                },\n                {\n                    text: \"Network\",\n                    align: \"left\",\n                    sortable: true,\n                    value: \"Network\"\n                },\n                {\n                    text: \"CDN Provider\",\n                    align: \"left\",\n                    sortable: true,\n                    value: \"CDN Provider\"\n                }\n            ]\n        };\n    },\n    methods: {\n        getAlliRouteCDNs() {\n            this.$store.dispatch(\"global/startLoading\");\n            this.$store\n                .dispatch(\"domains/getAlliRouteCDNs\", this.domain_id)\n                .then(\n                    function(result) {\n                        this.filterData = result.data;\n                        this.handleData();\n                        this.setPages();\n                        this.$store.dispatch(\"global/finishLoading\");\n                    }.bind(this)\n                )\n                .catch(\n                    function(error) {\n                        this.$store.dispatch(\"global/finishLoading\");\n                        this.$store.dispatch(\n                            \"global/showSnackbarError\",\n                            error.message\n                        );\n                    }.bind(this)\n                );\n        },\n        customFilter(item, queryText, itemText) {\n            const textOne = item.toLowerCase();\n            // const textTwo = item.cname.toLowerCase();\n            const searchText = queryText.toLowerCase();\n\n            return (\n                textOne.indexOf(searchText) > -1\n                // textTwo.indexOf(searchText) > -1\n            );\n        },\n        handleData() {\n            this.location = [...new Set(this.filterData.map(x => x.location))];\n            this.country = [\n                ...new Set(this.filterData.map(x => x.country_name))\n            ];\n            this.continent = [\n                ...new Set(this.filterData.map(x => x.continent_name))\n            ];\n            this.network = [...new Set(this.filterData.map(x => x.isp))];\n            this.cdnProvider = [\n                ...new Set(this.filterData.map(x => x.cdn_name))\n            ];\n\n            this.setPages();\n        },\n        editItem: function(item, type) {\n            console.log(item);\n            this.editedIndex = this.filterData.indexOf(item);\n            this.iRouteCDN = Object.assign({}, item);\n            this.iRouteCDN.domain_id = this.domain_id;\n            console.log(this.iRouteCDN, \"dx\");\n            if (type == 0) {\n                // 打api\n                // this.updateiRouteCDN();\n                console.log(\"dd\");\n            }\n        },\n        updateiRouteCDN: function() {\n            this.iRouteCDN.domain_id = this.domain_id;\n            this.$store.dispatch(\"global/startLoading\");\n            this.$store\n                .dispatch(\"domains/updateiRouteCDN\", this.iRouteCDN)\n                .then(\n                    function(result) {\n                        this.$store.dispatch(\"global/finishLoading\");\n                        this.getAlliRouteCDNs();\n                        this.closeEditDialog();\n                    }.bind(this)\n                )\n                .catch(\n                    function(error) {\n                        this.$store.dispatch(\"global/finishLoading\");\n                        this.$store.dispatch(\n                            \"global/showSnackbarError\",\n                            error.message\n                        );\n                    }.bind(this)\n                );\n        },\n        setPages: function() {\n            if (this.perPage == null || this.filterData == null) {\n                this.pages = null;\n            } else {\n                this.pages = Math.ceil(this.filterData.length / this.perPage);\n            }\n        }\n    },\n    watch: {\n        perPage: function(value) {\n            this.pagination.rowsPerPage = value;\n            this.setPages();\n        },\n        searchText: function() {\n            // this.getAllCDNs();\n            console.log(this.searchText);\n        }\n    },\n    mounted() {\n        this.handleData();\n        console.log(this.domain_id, \"domain_id\");\n    }\n};\n",{"version":3,"sources":["location.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"location.vue","sourceRoot":"src/components/iRoute","sourcesContent":["<template lang=\"pug\">\n    v-container#iRouteCdnSetting\n        v-layout(wrap)\n            v-flex(xs12 sm3 d-flex)\n                v-autocomplete(:items=\"continent\" :filter=\"customFilter\" label=\"Continent\" item-text=\"name\" v-model=\"searchText\")\n            v-flex(xs12 sm3 d-flex)\n                v-autocomplete(:items=\"country\" :filter=\"customFilter\" label=\"Country\" item-text=\"name\" v-model=\"searchText\")\n            v-flex(xs12 sm3 d-flex)\n                v-autocomplete(:items=\"network\" :filter=\"customFilter\" label=\"Network\" item-text=\"name\" v-model=\"searchText\")\n            v-flex(xs12 sm3 d-flex)\n                v-autocomplete(:items=\"cdnProvider\" :filter=\"customFilter\" label=\"CDN Provider\" item-text=\"name\" v-model=\"searchText\")\n        v-card\n            v-card-title\n                v-layout(row align-center)\n                    v-flex(xs12 sm6)\n                        v-text-field.pt-0.mt-0(v-model=\"searchText\" append-icon=\"search\" label=\"Search\" single-line hide-details)\n                    v-spacer\n                    v-btn(color=\"primary\" dark) Batch Override\n            v-data-table.elevation-1(:headers=\"headers\" :items=\"filterData\" :loading=\"$store.state.global.isLoading\" :pagination.sync=\"pagination\"  hide-actions :search=\"searchText\" v-model=\"selected\" select-all)\n                v-progress-linear(v-slot:progress color=\"primary\")\n                template(slot=\"items\" slot-scope=\"props\")\n                    tr\n                        td.text-xs-left\n                            v-checkbox(v-model=\"props.selected\" primary hide-details)\n                        td.text-xs-left {{props.index +1}}\n                        td.text-xs-left {{props.item.country_name}} / {{props.item.location}}\n                        td.text-xs-left {{props.item.isp}}\n                        td.text-xs-left\n                            v-select(:items=\"cdnProvider\" v-model=\"props.item.cdn_name\" @change=\"editItem(props.item, 0)\")\n                                        \n            v-layout.px-2(row align-center)\n                v-flex.text-xs-left.py-3(xs4)\n                v-flex.text-xs-right.py-3(xs8)\n                    v-pagination(v-model=\"pagination.page\" :length=\"pages\" :total-visible=\"7\" color=\"primary\")\n</template>\n<script>\nexport default {\n    props: [\"domain_id\"],\n    data() {\n        return {\n            selected: [],\n            location: [],\n            country: [],\n            continent: [],\n            network: [],\n            cdnProvider: [],\n            selectedCDN: [],\n            iRouteCDN: {},\n            filterData: [\n                {\n                    id: 1,\n                    continent_id: 1,\n                    country_id: 2,\n                    location: \"All\",\n                    isp: \"All\",\n                    network_id: 2,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"all\",\n                    country_name: \"not china\",\n                    network_name: \"国外\",\n                    cdn_id: 2,\n                    cdn_name: \"dnspod\"\n                },\n                {\n                    id: 2,\n                    continent_id: 4,\n                    country_id: 1,\n                    location: \"All\",\n                    isp: \"All\",\n                    network_id: 1,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"asia\",\n                    country_name: \"china\",\n                    network_name: \"国内\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                },\n                {\n                    id: 3,\n                    continent_id: 4,\n                    country_id: 1,\n                    location: \"All\",\n                    isp: \"Dian xin\",\n                    network_id: 3,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"asia\",\n                    country_name: \"china\",\n                    network_name: \"电信\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                },\n                {\n                    id: 4,\n                    continent_id: 4,\n                    country_id: 1,\n                    location: \"All\",\n                    isp: \"Lian tong\",\n                    network_id: 4,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"asia\",\n                    country_name: \"china\",\n                    network_name: \"联通\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                },\n                {\n                    id: 5,\n                    continent_id: 1,\n                    country_id: 2,\n                    location: \"All\",\n                    isp: \"All\",\n                    network_id: 15,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"all\",\n                    country_name: \"not china\",\n                    network_name: \"国外\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                },\n                {\n                    id: 6,\n                    continent_id: 4,\n                    country_id: 1,\n                    location: \"All\",\n                    isp: \"All\",\n                    network_id: 16,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"asia\",\n                    country_name: \"china\",\n                    network_name: \"国内\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                },\n                {\n                    id: 7,\n                    continent_id: 4,\n                    country_id: 1,\n                    location: \"Beijing\",\n                    isp: \"Yidong\",\n                    network_id: 101,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"asia\",\n                    country_name: \"china\",\n                    network_name: \"北京移动\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                },\n                {\n                    id: 8,\n                    continent_id: 4,\n                    country_id: 1,\n                    location: \"Beijing\",\n                    isp: \"Dian xin\",\n                    network_id: 33,\n                    edited_by: null,\n                    created_at: \"2019-05-15 15:29:18\",\n                    updated_at: \"2019-05-15 15:29:18\",\n                    deleted_at: null,\n                    continent_name: \"asia\",\n                    country_name: \"china\",\n                    network_name: \"北京电信\",\n                    cdn_id: null,\n                    cdn_name: \"hiero7\"\n                }\n            ],\n            pagination: {\n                rowsPerPage: 20\n            },\n            rowsPerPageItems: [\n                { name: \"20 per page\", value: 20 },\n                { name: \"50 per pages\", value: 50 }\n            ],\n            perPage: 20,\n            pages: 0,\n            error: {\n                status: false,\n                message: \"\"\n            },\n            editedIndex: -1,\n            searchText: \"\",\n            headers: [\n                {\n                    text: \"#\",\n                    align: \"left\",\n                    sortable: false,\n                    width: \"80px\",\n                    value: \"id\"\n                },\n                {\n                    text: \"Location\",\n                    align: \"left\",\n                    sortable: true,\n                    value: \"Location\"\n                },\n                {\n                    text: \"Network\",\n                    align: \"left\",\n                    sortable: true,\n                    value: \"Network\"\n                },\n                {\n                    text: \"CDN Provider\",\n                    align: \"left\",\n                    sortable: true,\n                    value: \"CDN Provider\"\n                }\n            ]\n        };\n    },\n    methods: {\n        getAlliRouteCDNs() {\n            this.$store.dispatch(\"global/startLoading\");\n            this.$store\n                .dispatch(\"domains/getAlliRouteCDNs\", this.domain_id)\n                .then(\n                    function(result) {\n                        this.filterData = result.data;\n                        this.handleData();\n                        this.setPages();\n                        this.$store.dispatch(\"global/finishLoading\");\n                    }.bind(this)\n                )\n                .catch(\n                    function(error) {\n                        this.$store.dispatch(\"global/finishLoading\");\n                        this.$store.dispatch(\n                            \"global/showSnackbarError\",\n                            error.message\n                        );\n                    }.bind(this)\n                );\n        },\n        customFilter(item, queryText, itemText) {\n            const textOne = item.toLowerCase();\n            // const textTwo = item.cname.toLowerCase();\n            const searchText = queryText.toLowerCase();\n\n            return (\n                textOne.indexOf(searchText) > -1\n                // textTwo.indexOf(searchText) > -1\n            );\n        },\n        handleData() {\n            this.location = [...new Set(this.filterData.map(x => x.location))];\n            this.country = [\n                ...new Set(this.filterData.map(x => x.country_name))\n            ];\n            this.continent = [\n                ...new Set(this.filterData.map(x => x.continent_name))\n            ];\n            this.network = [...new Set(this.filterData.map(x => x.isp))];\n            this.cdnProvider = [\n                ...new Set(this.filterData.map(x => x.cdn_name))\n            ];\n\n            this.setPages();\n        },\n        editItem: function(item, type) {\n            console.log(item);\n            this.editedIndex = this.filterData.indexOf(item);\n            this.iRouteCDN = Object.assign({}, item);\n            this.iRouteCDN.domain_id = this.domain_id;\n            console.log(this.iRouteCDN, \"dx\");\n            if (type == 0) {\n                // 打api\n                // this.updateiRouteCDN();\n                console.log(\"dd\");\n            }\n        },\n        updateiRouteCDN: function() {\n            this.iRouteCDN.domain_id = this.domain_id;\n            this.$store.dispatch(\"global/startLoading\");\n            this.$store\n                .dispatch(\"domains/updateiRouteCDN\", this.iRouteCDN)\n                .then(\n                    function(result) {\n                        this.$store.dispatch(\"global/finishLoading\");\n                        this.getAlliRouteCDNs();\n                        this.closeEditDialog();\n                    }.bind(this)\n                )\n                .catch(\n                    function(error) {\n                        this.$store.dispatch(\"global/finishLoading\");\n                        this.$store.dispatch(\n                            \"global/showSnackbarError\",\n                            error.message\n                        );\n                    }.bind(this)\n                );\n        },\n        setPages: function() {\n            if (this.perPage == null || this.filterData == null) {\n                this.pages = null;\n            } else {\n                this.pages = Math.ceil(this.filterData.length / this.perPage);\n            }\n        }\n    },\n    watch: {\n        perPage: function(value) {\n            this.pagination.rowsPerPage = value;\n            this.setPages();\n        },\n        searchText: function() {\n            // this.getAllCDNs();\n            console.log(this.searchText);\n        }\n    },\n    mounted() {\n        this.handleData();\n        console.log(this.domain_id, \"domain_id\");\n    }\n};\n</script>\n"]}]}